Project Proposal: "The Truth Engine" (Non-Fiction Parallel)1. The Core ConceptA dedicated desktop application for non-fiction writers (biographers, technical writers, journalists, academics) that uses local RAG (Retrieval-Augmented Generation) to enforce factual consistency and source integrity.Unlike the Fiction variant (which tracks invented consistency), this app tracks external verification. It acts as an automated research assistant that lives in the editor.2. Architecture Strategy: The "Twin Engines"Decision: Separate Products, Shared Core.The Shared Core (70% of Code):Electron Shell & File I/O.The "Chunking" Engine (breaking text into vector-searchable pieces).The Local Vector Database (using something like LanceDB or SQLite-vss).The LLM Connector (Ollama/LocalAI/OpenAI API hooks).The Text Editor Component (ProseMirror/TipTap).The Divergence (30% of Code):Fiction App: UI focuses on "Stats," "Inventory," "World Map," "Characters."Non-Fiction App: UI focuses on "Sources," "Citations," "Timeline," "Entities."3. Feature Mapping: From Fantasy to FactFeatureFiction ImplementationNon-Fiction ImplementationInput DataUser manually types "Lore" entries (e.g., "The King is evil").Ingestion Engine: User drags/drops PDFs, EPUBs, MP3 Transcripts. The app auto-chunks them into the "Knowledge Base."Entity TrackingTracks HP, Mana, Equipment Slots.Entity Resolution: Tracks Names, Dates, Locations, Definitions. Detecting synonyms (e.g., "JFK" = "John F. Kennedy").Consistency Check"Does this violate the Magic System?""The Hallucination Detector": "Does this claim exist in the Source Documents?" (If no source found -> Red Highlight).OutputStory Bible / Wiki.Citation Manager: Auto-generates footnotes/endnotes linking specific sentences to specific source chunks.4. The "Killer Feature" (The USP)"Active Fact-Checking" (The Red Pen)As the user writes, the AI runs background queries against the uploaded Source Documents.User types: "The Battle of Hastings took place in 1065."App Action: RAG query searches "Battle of Hastings date."Result: Top hit says "1066."UI Feedback: The text "1065" gets a subtle red underline. Hovering reveals: "Conflict: Source 'History_Vol_1.pdf' states 1066."5. Technical Challenges (Brutal Reality)PDF Parsing is Hell: Unlike fiction where the user types the lore, non-fiction requires reading messy existing formats (PDFs with columns, scanned images, weird formatting). You will need a robust ingestion library (like Mozilla's PDF.js or unstructured.io).Citation Accuracy: The AI cannot just "know" things; it must point to the exact page number or paragraph in the source file. This requires keeping strict metadata on every vector chunk.Strictness vs. Flow: The AI must be prompted to be "boring." Low temperature, high penalty for ungrounded information. It essentially needs to be an "Anti-Creative" mode.6. Target User PersonasThe Technical Writer: Needs to ensure the "Installation Guide" matches the "API Spec" (Source Doc).The Biographer: Needs to ensure the timeline of the subject's life matches the 500 scanned letters they uploaded.The Student/Academic: Needs to write a paper and ensure every claim has a backing citation from their reading list.7. Next StepsRefactor the Repo: Move your current LitRPG logic into a /packages/fiction-core folder and create a shared /packages/common-core.Build the Ingestor: Prototype a simple script that takes a PDF, turns it into text, and chunks it into your existing vector DB.The "Truth" Test: Feed the system a PDF of a Wikipedia article, write a sentence that contradicts it, and see if you can get the LLM to flag it.